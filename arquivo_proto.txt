service RegistroDispositivosService {
    rpc RegistrarDispositivo (DeviceInfo) returns (Ack);
}

service ControleDispositivosService {
    rpc EnviarComando (Command) returns (DeviceData);
}

message DeviceInfo {
    string device_id = 1;
    string type = 2;      // "camera", "streetlight", etc.
    string ip = 3;
    int32 port = 4;
    DeviceData data = 5;
}

message DeviceData {
    string device_id = 1;
    string status = 2;     // ex: "ON", "OFF", "ERROR"
    repeated string value_name = 3;  // ex:  {temperatura, tempo de espera}
    repeated string value = 4;      // ex: {25.5 , 5s}
}

message Command {
    string device_id = 1;
    string action = 2;    // "TURN_ON", "SET_RESOLUTION", "MULTICAST", etc.
    string parameter = 3; // "1920x1080", "15" (segundos)
}

message Discover {
    string grpc_endpoint = 1;
}

message Ack {
    bool sucesso = 1;
}